# RGB-D Scan with ARKit

For every `saveSpan` frames, save

- RGB
- Depth map
- Confidence map
- Camera intrinsic
- View matrix


## How to Use

Just open the app and tap the screen to start scanning.

From the tab bar, you can choose what to show on the screen among 

- Camera Image (RGB)
- Depth Map
- Confidence Map

When the `Show Point Cloud` button is on, the app shows the point cloud of the scnene instead of Camera Image.

| Camera Image | Depth Map | Confidence Map | Point Cloud |
|:------------:|:---------:|:--------------:|:-----------:|
| <img src="./images/rgb.PNG" width="200"> | <img src="./images/depth.PNG" width="200"> | <img src="./images/confidence.PNG" width="200">| <img src="./images/point_cloud.PNG" width="200"> | 


## How to Save Point Cloud

After scanning, tap the `Save` button on the bottom left of the app to save the point cloud as a `.ply` file. 

The point cloud is generated by projecting the pixels of the current frame onto the 3D space using the depth map, camera intrinsic and view matrix.


## Known Issues

- The number of saved frames shown on the top left of the app is not accurate. Sometimes it shows a larger number than the actual number of saved frames.
